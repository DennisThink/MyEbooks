注销状态

在注销状态下，连接正在被终止。一个客户端请求（通过LOGOUT命令），或者客户端、服务器的单方面动作，都会导致进入这个状态。

如果客户端请求注销状态，服务器必须在关闭连接前发送LOGOUT命令的一个非标签化BYE响应和一个标签化OK响应；客户端在关闭连接前，必须读取这个LOGOUT命令的标签化OK响应至。

在没有发送一个包含原因的、非标签化BYE响应的情况下，一个服务器不能单方面关闭连接。一个客户端不应单方面关闭连接，而应当发出一个LOGOUT命令。如果服务器发现客户端单方面关闭了连接，服务器可以忽略这个非标签化BYE响应，并简单地关闭它的连接。


+----------------------+
|connection established|
+----------------------+
||
//
+--------------------------------------+
| server greeting |
+--------------------------------------+
|| (1) || (2) || (3)
// || ||
+-----------------+ || ||
|Not Authenticated| || ||
+-----------------+ || ||
|| (7) || (4) || ||
|| // // ||
|| +----------------+ ||
|| | Authenticated |<=++ ||
|| +----------------+ || ||
|| || (7) || (5) || (6) ||
|| || // || ||
|| || +--------+ || ||
|| || |Selected|==++ ||
|| || +--------+ ||
|| || || (7) ||
// // // //
+--------------------------------------+
| Logout |
+--------------------------------------+
||
//
+-------------------------------+
|both sides close the connection|
+-------------------------------+


    （1）未预认证的连接（OK欢迎）

    （2）预认证的连接（PREAUTH欢迎）

    （3）被拒绝的连接（BYE欢迎）

    （4）成功LOGIN或者AUTHENTICATE命令

    （5）成功的SELECT或者EXAMINE命令

    （6）CLOSE命令，或者失败的SELECT、EXAMINE命令

    （7）LOGOUT命令，服务器关闭，或者连接已关闭